#
# Copyright 2024 the original author or authors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

server:
  port: 9999

quick-start-app-config:
  # 设备可以访问的IP或域名(1078 码流将上传到这个地址)
  jt1078-server-host: 192.168.71.5

# 完整配置见 ext/jt/jt-1078-server-spring-boot-starter-reactive/src/main/resources/META-INF/default-xtream-jt1078-server-config.yml
# 完整配置见 ext/jt/jt-1078-server-spring-boot-starter-reactive/src/main/resources/META-INF/default-xtream-jt1078-server-config.yml
# 完整配置见 ext/jt/jt-1078-server-spring-boot-starter-reactive/src/main/resources/META-INF/default-xtream-jt1078-server-config.yml
jt1078-server:
  enabled: true
  features:
    # 目前 dashboard 就内置了几个接口 还没有UI
    dashboard:
      enabled: true
      # 可选配置: jt808 服务 dashboard 地址
      # 下发指令的请求会被转发到这个地址
      jt808-dashboard-proxy:
        base-url: http://localhost:8888
      # FIXME 为方便调试 这里允许播放地址跨域访问
      dashboard-api-cors-filter:
        enabled: true
        path-pattern: /dashboard-api/jt1078/v1/stream-data/**
        allow-credentials: false
        allowed-origins: '*'
        allowed-origin-patterns: [ ]
        allowed-headers: '*'
        exposed-headers: [ ]
        allowed-methods: '*'
  # TCP 服务配置(1078码流), 目前还不支持 UDP
  tcp-server:
    enabled: true
    host: 0.0.0.0
    # TCP 服务端口(处理 1078 码流)
    port: 7856
    ## 报文的最大长度
    max-frame-length: 8192
    ## 请求处理线程
    loop-resources:
      ## @default reactor.netty.resources.LoopResources.DEFAULT_IO_SELECT_COUNT: -1
      # select-count: 1
      ## @default reactor.netty.resources.LoopResources.DEFAULT_IO_WORKER_COUNT
      # worker-count: 10
      ## x78: xtream-jt1078
      thread-name-prefix: x78-tcp
      daemon: true
      prefer-native: true
      colocate: true

logging:
  level:
    root: info
    io.netty.handler.logging.LoggingHandler: debug
