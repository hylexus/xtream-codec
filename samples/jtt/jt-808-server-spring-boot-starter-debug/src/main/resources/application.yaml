#
# Copyright 2024 the original author or authors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

########################################################
### SpringBoot 配置######################################
########################################################
server:
  port: 9999

########################################################
### xtream-codec-server-reactive 配置####################
########################################################
jt808-server:
  # false: 不会进行任何自动配置
  enabled: true
  builtin-filters:
    # 内置的请求日志 filter(仅仅用于调试)
    request-logger:
      enabled: true
    # 内置的请求解码 filter(如果不启用的话，你需要手动解码请求)
    request-decoder:
      enabled: true
  # 分包请求暂存器
  request-sub-package-storage:
    maximum-size: 1024
    ttl: 45s
  # TCP 服务配置
  tcp-server:
    # 是否启动 TCP 服务
    enabled: true
    # 绑定所有网卡
    host: 0.0.0.0
    # TCP 服务端口
    port: 7777
    loop-resources:
      select-count: 1
      worker-count: 10
      thread-name-prefix: xtream-tcp
      daemon: true
      colocate: true
      prefer-native: true
  # UDP 服务配置
  udp-server:
    # 是否启动 UDP 服务
    enabled: true
    # 绑定所有网卡
    host: 0.0.0.0
    # UDP 服务端口
    port: 8888
    # 一个 UDP 包可能包含多个 JT808 报文
    # 是否启用内置的 UDP 包拆分器
    enable-builtin-multiple-udp-package-splitter: true
    loop-resources:
      select-count: 1
      worker-count: 10
      thread-name-prefix: xtream-udp
      daemon: true
      colocate: true
      prefer-native: true
  handler-schedulers:
    non-blocking-scheduler:
      type: parallel
      bounded-elastic:
        thread-name-prefix: bounded-elastic
        thread-capacity: 10
        queued-task-capacity: 1024
        reject-blocking-task: true
        daemon: true
        ttl: 1m
      parallel:
        thread-name-prefix: parallel
        parallelism: 10
        daemon: true
        reject-blocking-task: true
      single:
        daemon: true
        reject-blocking-task: true
        thread-name-prefix: single
    blocking-scheduler:
      type: bounded_elastic
      bounded-elastic:
        thread-name-prefix: blocking-bounded-elastic
        thread-capacity: 10
        queued-task-capacity: 1024
        reject-blocking-task: true
        daemon: true
        ttl: 1m
      parallel:
        thread-name-prefix: blocking-parallel
        parallelism: 10
        daemon: true
        reject-blocking-task: true
      single:
        daemon: true
        reject-blocking-task: true
        thread-name-prefix: blocking-single
